# 採用診断アプリ

このアプリは、求職者の性格や価値観を診断し、最適な職種を提案する採用支援ツールのデモ版です。

## 特徴

- **簡単診断**: 10問の質問に答えるだけで適職がわかる
- **自動進行**: 選択後500ms遅延で自動的に次の質問へ進む
- **詳細な分析**: 5つの職種タイプから最適なものを判定
- **履歴管理**: 診断履歴の表示・削除・比較機能
- **ガチャシステム**: ポイント消費で採用のコツなどがもらえる
- **共有機能**: 診断結果のSNSシェア対応
- **ローカル保存**: ブラウザのLocalStorageに全データを保存
- **レスポンシブ**: PC・スマートフォン両対応
- **アニメーション**: スムーズな画面遷移とインタラクション
- **デバッグ機能**: 開発環境でのデータメンテナンス機能

## 診断タイプ

1. **適職診断** (MVP実装済み)
   - クリエイティブ職
   - 分析・戦略職
   - 技術・専門職
   - 対人サポート職
   - リーダー・マネジメント職

## 技術スタック

- **Next.js 15** - App Router使用
- **TypeScript** - 型安全性の確保
- **Tailwind CSS** - ユーティリティファーストCSS
- **Zustand** - 軽量状態管理
- **Framer Motion** - アニメーション
- **LocalStorage** - データ永続化（サーバー不要）

## セットアップ

### 必要な環境

- Node.js 18.0.0 以上
- npm または yarn

### インストール

```bash
# リポジトリをクローン
git clone <repository-url>
cd shindan-demo

# 依存関係をインストール
npm install
```

### 開発サーバーの起動

```bash
npm run dev
```

アプリケーションは `http://localhost:3000` で起動します。

### その他のコマンド

```bash
# プロダクションビルド
npm run build

# プロダクションサーバー起動
npm run start

# リンター実行
npm run lint
```

## 使用方法

### 1. 診断開始
- ホーム画面の「診断を始める」ボタンをクリック
- 適職診断ページに遷移

### 2. 質問回答
- 10問の質問に順次回答
- 進捗バーで現在の進行状況を確認
- 「前の質問」「次の質問」で自由に移動可能

### 3. 結果確認
- 診断完了後、結果画面に自動遷移
- 適職タイプと詳細説明を表示
- 適性スコアをグラフで視覚化
- おすすめ職種リストを提案

### 4. 履歴管理・エンゲージメント機能
- **履歴管理** (`/history`): 診断履歴の表示・検索・削除
- **結果比較** (`/compare`): 複数の診断結果を同時比較
- **ガチャシステム** (`/gacha`): ポイント消費で報酬獲得
- **共有機能**: Web Share API または クリップボード経由でシェア
- **ポイント獲得**: 診断完了時に10ポイント獲得

### 5. データメンテナンス (開発時のみ)
- **デバッグページ** (`/debug`): データ状態確認・クリア機能
- **データ整合性チェック**: 自動的な破損データ検出・修復
- **ストレージ管理**: 容量制限対応・古いデータの自動削除

## ディレクトリ構造

```
shindan-demo/
├── app/                      # Next.js App Router
│   ├── page.tsx             # ホームページ
│   ├── diagnosis/[type]/    # 診断実行ページ
│   ├── results/[id]/        # 診断結果表示
│   ├── history/             # 診断履歴管理
│   ├── compare/             # 結果比較機能
│   ├── gacha/               # ガチャシステム
│   ├── debug/               # デバッグ・メンテナンス
│   └── layout.tsx           # レイアウト
├── components/              # Reactコンポーネント
│   ├── ui/                  # UIコンポーネント（削除モーダルなど）
│   ├── diagnosis/           # 診断関連コンポーネント
│   └── gacha/               # ガチャ関連コンポーネント
├── lib/                     # ユーティリティ関数
│   ├── diagnosis-logic/     # 診断ロジック
│   ├── storage/             # LocalStorage管理（整合性チェック付き）
│   ├── store/               # Zustandストア（diagnosis/userStore）
│   └── types.ts             # 型定義
├── data/                    # 静的データ
│   ├── questions.json       # 診断質問データ
│   └── rewards.json         # ガチャ報酬データ
└── public/                  # 静的アセット
```

## データ構造

### ユーザーデータ
```typescript
interface UserData {
  userId: string              // UUID
  completedDiagnoses: Diagnosis[]  // 完了した診断
  points: number              // 獲得ポイント
  unlockedRewards: Reward[]   // 報酬
  preferences: UserPreferences // 設定
  createdAt: string          // 作成日時
  updatedAt: string          // 更新日時
}
```

### 診断結果
```typescript
interface DiagnosisResult {
  type: string               // 職種タイプ
  title: string             // 結果タイトル
  description: string       // 詳細説明
  scores?: Record<string, number>  // 適性スコア
  recommendations?: string[] // おすすめ職種
  imageUrl?: string         // 結果画像
}
```

## Vercelデプロイ

このアプリはVercelでの簡単デプロイを想定して設計されています。

```bash
# Vercel CLIを使用する場合
npm install -g vercel
vercel --prod
```

または、GitHubリポジトリと連携してVercelダッシュボードからデプロイできます。

## 実装完了状況

### ✅ 完成済み
- ✅ **適職診断**: 10問の質問による基本診断機能
- ✅ **自動進行**: 回答選択後の自動遷移
- ✅ **履歴管理**: 検索・削除・比較機能
- ✅ **ガチャシステム**: ポイント消費による報酬獲得
- ✅ **共有機能**: Web Share API + クリップボード対応
- ✅ **データ整合性**: 自動修復・デバッグ機能
- ✅ **レスポンシブデザイン**: モバイル最適化

### 🔄 今後の拡張可能性
- [ ] 他の診断タイプ（企業カルチャーマッチ、キャリアタイプ、業界適性）
- [ ] より詳細な分析レポート
- [ ] ダークモード対応
- [ ] 管理画面（質問・結果の編集）
- [ ] API連携（外部CRMシステム）
- [ ] パフォーマンス最適化

## 修正済みの主要バグ
1. **診断重複作成問題**: useEffect依存関係とsaved状態管理を修正
2. **ガチャ重複キーエラー**: 報酬アイテムに一意のキー生成を実装
3. **データ破損問題**: LocalStorageの自動検出・修復機能を追加

## ライセンス

このプロジェクトはデモ用途のため、商用利用前に適切なライセンスを設定してください。

## サポート

問題や質問がある場合は、プロジェクトの課題管理システムを通じてお知らせください。